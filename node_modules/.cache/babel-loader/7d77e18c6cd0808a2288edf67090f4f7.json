{"remainingRequest":"/Users/changbin/Documents/workspace/nextstop/nextstop-admin/node_modules/thread-loader/dist/cjs.js!/Users/changbin/Documents/workspace/nextstop/nextstop-admin/node_modules/babel-loader/lib/index.js!/Users/changbin/Documents/workspace/nextstop/nextstop-admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/changbin/Documents/workspace/nextstop/nextstop-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/changbin/Documents/workspace/nextstop/nextstop-admin/src/components/page/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/changbin/Documents/workspace/nextstop/nextstop-admin/src/components/page/Login.vue","mtime":1637819246938},{"path":"/Users/changbin/Documents/workspace/nextstop/nextstop-admin/node_modules/cache-loader/dist/cjs.js","mtime":1637819675662},{"path":"/Users/changbin/Documents/workspace/nextstop/nextstop-admin/node_modules/thread-loader/dist/cjs.js","mtime":1637819675442},{"path":"/Users/changbin/Documents/workspace/nextstop/nextstop-admin/node_modules/babel-loader/lib/index.js","mtime":1637819675721},{"path":"/Users/changbin/Documents/workspace/nextstop/nextstop-admin/node_modules/cache-loader/dist/cjs.js","mtime":1637819675662},{"path":"/Users/changbin/Documents/workspace/nextstop/nextstop-admin/node_modules/vue-loader/lib/index.js","mtime":1637819675815}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { requestUser, requestToken } from \"../../utils/request\";\nexport default {\n  data: function data() {\n    return {\n      param: {\n        username: 'changbin',\n        password: '123456'\n      },\n      rules: {\n        username: [{\n          required: true,\n          message: '请输入用户名',\n          trigger: 'blur'\n        }],\n        password: [{\n          required: true,\n          message: '请输入密码',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  methods: {\n    submitForm: function submitForm() {\n      var _this = this;\n\n      this.$refs.login.validate(function (valid) {\n        if (valid) {\n          var params = new URLSearchParams();\n          params.append(\"username\", _this.param.username);\n          params.append(\"password\", _this.param.password);\n          params.append(\"grant_type\", \"password\");\n          params.append(\"scope\", \"read\");\n          params.append(\"client_id\", \"cb\");\n          params.append(\"client_secret\", \"123456\");\n          requestToken(params).then(function (res) {\n            var access_token = res.access_token;\n            var token_type = res.token_type;\n            var refresh_token = res.refresh_token;\n            var expires_in = res.expires_in;\n            var user_id = res.user_id;\n            var user_name = res.user_name;\n            var real_name = res.real_name;\n            var user_email = res.user_email;\n            _this.logining = false;\n\n            if (access_token) {\n              sessionStorage.setItem('access_token', access_token);\n              sessionStorage.setItem('token_type', token_type);\n              sessionStorage.setItem('refresh_token', refresh_token);\n              sessionStorage.setItem('expires_in', expires_in);\n              sessionStorage.setItem('user_id', user_id);\n              sessionStorage.setItem('user_name', user_name);\n              sessionStorage.setItem('real_name', real_name);\n              sessionStorage.setItem('user_email', user_email);\n\n              var _params = new URLSearchParams();\n\n              _this.$message.success('登录成功');\n\n              _this.$router.push({\n                path: '/index'\n              });\n            } else {\n              sessionStorage.removeItem('access_token');\n              sessionStorage.removeItem('user_id');\n\n              _this.$message({\n                message: \"输入信息错误!\",\n                type: 'error'\n              });\n            }\n          });\n        } else {\n          _this.$message.error('请输入账号和密码');\n\n          console.log('error submit!!');\n          return false;\n        }\n      });\n    }\n  }\n};",null]}